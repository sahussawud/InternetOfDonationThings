{% extends "base3.html" %}
{% block Scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
{% endblock Scripts %}
{% block content %}
{% load static %}
<style>
    .dashboard{
        width: 100%;
        height: 6em;
    }
    .num_dashboard{
        font-size: 3em;
    }
</style>
<div class="container">
    <div class="row">
        <div class="col-10">
            {% include "messages.html" %}
        </div>
    </div>
    <div class="row justify-content-start">
        <div class="col-md-6 mb-3">
            <div class="card w-20">
                <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner">
                        {% for pic in project_picture %}
                        {% if forloop.first %}
                        <div class="carousel-item active">
                            <img src="/media/{{ pic.url }}" class="d-block " alt="{{pic.name}}" style=" object-fit: cover;
                        object-position: 0 0;
                        width: 100%;
                        height: 337px;">
                        </div>
                        {% else %}
                        <div class="carousel-item">
                            <img src="/media/{{ pic.url }}" class="d-block " alt="{{pic.name}}" style=" object-fit: cover;
                        object-position: 0 0;
                        width: 100%;
                        height: 337px;">
                        </div>
                        {% endif %}
                        {% endfor %}

                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
                <div class="card-body">
                    <h5 class="card-title">โครงการ : {{project.name}}</h5>
                    <p class="card-text">คำอธิบาย : {{project.desc}}</p>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">ผู้ดูเเลโครงการ : {{project.recipient}}</li>
                        <li class="list-group-item">จุดประสงค์ : {{project.propose}}</li>
                        <li class="list-group-item">จำนวนที่จะไปช่วย : {{project.helping_people}} คน</li>
                        <li class="list-group-item">ที่ {{project.address}}</li>
                    </ul>
                    <p class="card-text"><small class="text-muted">ปิดรับบริจาควันที่ {{project.expire_date}}</small>
                    </p>
                </div>
            </div>
        </div>
        <div class="col-md-6 mb-2">
            <div class="card w-40">
                <div class="card-body">

                    <h1 class="card-header">สรุปโครงการ</h1>
                    <div class="row justify-content-between mx-4 my-4">
                        <div class="dashboard bg-success col-3">ยืนยันเเล้ว <div class="num_dashboard">5</div></div>
                        <div class="dashboard bg-warning col-3">รอการยืนยัน <div class="num_dashboard">5</div></div>
                        <div class="dashboard bg-danger col-3">ต้องการ <div class="num_dashboard">5</div></div>
                    </div>
                    <h1 class="card-header">สิ้นสุดโครงการใน : 1 เดือน 12 วัน</h1>
                    <div class="row justify-content-center">
                        <canvas id="pie-chart" width="800" height="450"></canvas>
                    </div>
                    <div class="row justify-content-center my-5">
                        <div class="btn-group btn-group-justified">
                        <a href="#" class="btn btn-success">เปิดรับบริจาค</a>
                        <a href="#" class="btn btn-secondary">ปิดรับบริจาค</a>
                        <a href="#" class="btn btn-secondary">ดำเนินการ</a>
                        <a href="#" class="btn btn-secondary">เสร็จสิ้น</a>
                      </div>
                    </div>
                    


                </div>
            </div>
        </div>

    </div>

    <div class="row">

        <table class="table">
            <thead>
                <tr>
                    <th scope="col">ลำดับ</th>
                    <th scope="col">วันที่ลงทะเบียน</th>
                    <th scope="col">ชื่อ</th>
                    <th scope="col">ประเภท</th>
                    <th scope="col">สภาพ</th>
                    <th scope="col">จำนวน</th>
                    <th scope="col">สถานะ</th>


                </tr>
            </thead>
            <tbody>
                {% for donation in project_in_project %}
                <tr>
                    <td>{{forloop.counter}}</td>
                    <td>{{donation.date}}</td>
                    <td>{{donation.name}}</td>
                    <td>{{donation.dtype.name}}</td>
                    <td>{{donation.get_condition_display}}</td>
                    <td>{{donation.quantity}}</td>
                    <td>{{donation.get_status_display}}</td>

                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
<script>
    new Chart(document.getElementById("pie-chart"), {
    type: 'pie',
    data: {
      labels: ["ชำรุด", "ต้องซ่อม", "ดี", "เสมือนใหม่", "ใหม่"],
      datasets: [{
        label: "สภาพสิ่งของบริจาค",
        backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850"],
        data: [2478,5267,734,784,433]
      }]
    },
    options: {
      title: {
        display: true,
        text: 'สภาพสิ่งของบริจาคโดยรวม'
      }
    }
});
</script>


{% endblock content %}